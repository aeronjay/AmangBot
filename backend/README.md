# AmangBot Backend

This backend provides a Flask API to interact with the RAG (Retrieval-Augmented Generation) model based on the AmangBot workflow. It allows you to ask questions related to the university handbook and get answers generated by the AI model.

## Setup and Installation

### 1. Create a Virtual Environment

It is highly recommended to use a virtual environment to manage the project's dependencies.

**On Windows:**
```bash
python -m venv venv
.\venv\Scripts\activate
```

**On macOS/Linux:**
```bash
python3 -m venv venv
source venv/bin/activate
```

### 2. Install Dependencies

Install all the required Python packages using the `requirements.txt` file.

```bash
pip install -r requirements.txt
```
**Note:** Depending on your system and CUDA version, you might need to install a specific version of `torch`. The `requirements.txt` file includes the CPU version of `faiss-cpu`. If you have a GPU and want to use it, you might need to install `faiss-gpu`.

### 3. Run the Flask Application

Once the dependencies are installed, you can run the Flask application.

```bash
flask run
```

The application will start on `http://127.0.0.1:5000`. The first time you run it, it will download and cache the machine learning models, which might take some time and require a good internet connection.

## API Endpoint

### `/ask`

- **Method:** `POST`
- **Description:** Receives a question and returns a generated answer from the RAG model.
- **Request Body:**
  ```json
  {
    "question": "Your question about the handbook"
  }
  ```
- **Example using cURL:**
  ```bash
  curl -X POST -H "Content-Type: application/json" -d "{\"question\": \"What are the graduation requirements?\"}" http://127.0.0.1:5000/ask
  ```
- **Success Response (200):**
  ```json
  {
    "question": "What are the graduation requirements?",
    "answer": "The generated answer from the model...",
    "sources": [
      {
        "text": "Relevant chunk of text from the handbook...",
        "score": 0.89,
        "chunk_id": 123
      }
    ]
  }
  ```
- **Error Response (400/500):**
  ```json
  {
    "error": "Error message"
  }
  ```

### `/health`

- **Method:** `GET`
- **Description:** A health check endpoint to verify that the service is running.
- **Success Response (200):**
    ```json
    {
      "status": "ok",
      "message": "Backend is running."
    }
    ```
